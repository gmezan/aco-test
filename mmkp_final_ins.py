import numpy as np
from mmkp import *
import matplotlib.pyplot as plt

NUMBER_OF_ANTS = 4
N_ITERS = 25
ALPHA = 1.1
BETA = 1.5
RHO = 0.005
KP_FIRST = False
PLOT = False

def get_ins01():
    c = [[23.05454717194036, 10.140616434131115, 10.798438158978568], [19.95091948710013, 34.572681340438024, 1.5989106412872585], [31.13333250179151, 30.678243402482295, 1.7577780156563554], [11.41428945419388, 27.06318744527042, 11.682119572764526], [30.57985627238736, 11.051796691092497, 15.294230763023432], [12.461580368140098, 8.985014707843936, 20.2119982129854], [24.95679773992204, 32.198563668091666, 0.2692312250705302], [16.751678580260855, 30.392668101356605, 0.9733393354161337]]
    p = [25, 56, 44, 5, 77, 16, 12, 13, 15, 92, 60, 36, 70, 19, 41, 63, 5, 34, 42, 35, 30, 21, 88, 96, 26]
    w = [[15.323580191422533, 19.374164990499448, 0.4638570215349125], [5.9956254487989185, 10.671013815018808, 4.385256442205952], [16.808503659905313, 11.358540359523946, 9.589915105182456], [0.28162140294733407, 18.97278719514137, 1.3061480479514453], [3.2040130784822263, 15.168476014395555, 5.483300795401389], [3.2339247914874125, 12.922219333635507, 2.0737985864579644], [17.44231794256982, 15.045382942426023, 5.34719327079854], [7.737933596380968, 5.90036624233147, 19.84916954419779], [18.7572138918344, 18.61101766264131, 12.098606250612177], [19.645530261200946, 14.229093114463245, 0.2519382902535483], [5.914360617449903, 14.960932965407686, 17.774373331668436], [17.59616911089517, 19.255065707374243, 14.728256489460561], [10.61580478409726, 7.8361208299255525, 11.217368618141826], [13.303642744845625, 10.655515363441433, 14.151866085498392], [5.903597989421543, 19.748119840899673, 0.5262303267656043], [2.698025396949064, 6.641668809869056, 13.339474566604101], [12.193130914943048, 15.101374425804217, 14.716755394786547], [2.159520369166339, 3.3555284435645127, 14.26773569363117], [4.953550702910123, 12.799158924317577, 7.0864099658052755], [7.116522554168528, 14.119538108735043, 2.603977299775193], [16.72316847944234, 18.721246917419407, 14.014472500442526], [5.982269605023212, 10.408801570767123, 19.096948023379642], [0.9197137420465573, 18.925814646497606, 9.303773421428772], [12.151668383969179, 12.62397777402841, 16.91297650616121], [3.7942194358468817, 0.47183815038998933, 3.7567549786913967]]

    return c, p, w

def get_ins02():
    c = [[4.700046130490575, 8.212245849936423, 9.12423782145248], [14.654518031900778, 9.267626746283387, 15.886228489603617], [29.95232281425571, 7.792450204724924, 21.816254970030094], [34.964440871755876, 6.115733608541163, 0.8287849782253258], [5.005331503905557, 33.18846156823047, 27.06890245370465], [7.729590977127334, 30.75049666556335, 18.75651241093438], [8.044753514694337, 10.14286822843573, 12.493817141782817], [7.6964037561869265, 3.5939007542166364, 19.737878603842645], [26.60410147782048, 30.439055722984968, 33.96649797025805], [32.070304027530014, 35.964826043791845, 3.3397576902573958], [4.126988020202816, 13.595096950897041, 31.45010875581309], [6.057939858448436, 33.23371986304272, 5.169560104028608]]
    p = [81, 86, 99, 92, 16, 59, 49, 5, 70, 30, 24, 22, 89, 1, 83, 74, 70, 41, 7, 63, 27, 58, 89, 36, 40, 86, 4, 54, 19, 36, 96, 74, 6, 17, 61, 6]
    w = [[11.011010416096383, 19.6933608422747, 19.263112577881486], [5.5531672512297785, 18.07791466783619, 6.532453209921334], [17.80792971867603, 14.331557804648597, 13.04186593754854], [18.62863197893245, 4.293384043363135, 5.436569518532237], [5.695568115312783, 12.718478569799318, 10.515844238622975], [18.37679261437563, 8.556962204497012, 18.432849055967786], [8.731201014388235, 9.184130959964323, 9.594182749363856], [3.069587424794822, 11.452648830361554, 11.064521680089484], [8.53722038529427, 9.833611399001484, 7.868239847844379], [4.604670165266251, 0.27790478341762404, 15.034894555880172], [0.1663955228313152, 9.394597002121099, 3.302442215772534], [10.846434368860095, 7.502126426442985, 6.352339782114013], [7.339094625203182, 8.998312319926473, 16.175794300321197], [0.2384783977887972, 4.551799938078565, 14.15621045773582], [11.92423793540964, 12.206991662584057, 8.697224928940624], [6.792498181128668, 19.701694795373605, 7.328522687705052], [11.033642523556326, 5.751761203930707, 6.412856538423284], [19.52692377372965, 13.801197034771826, 2.262898880975097], [9.351409332175098, 12.50616461052572, 7.316014858883495], [1.5358534029214432, 14.028052812176323, 9.93298919487084], [7.882139120171365, 5.1787551629951505, 8.715155837024406], [14.137529150127756, 5.033306661490329, 17.857492932001207], [9.134362105091103, 6.5496926589393585, 6.962030580294451], [12.641087260631405, 7.259618361236544, 3.818175196029414], [14.909961579764563, 3.787871055290777, 17.847411897672668], [19.471943495800566, 15.368184735373646, 6.377905964706285], [18.823798402571988, 4.862350197580801, 12.23121504578575], [19.46368003375425, 0.9875864092383191, 6.980825346042132], [8.241760002414741, 9.580047565908483, 9.91035749832886], [3.792679843917648, 19.710263914486344, 19.500102846220035], [9.6325191509597, 0.6136508133310659, 15.277532619242773], [1.191253880598604, 18.30443323622648, 0.866248454865739], [15.527722945648286, 15.450219976733468, 16.592975787390852], [19.771768317475136, 6.164547910086952, 6.097111866944074], [8.788315602530261, 19.834296324078004, 5.073869635557296], [3.484498054654863, 2.251248253978453, 10.570406885189312]]

    return c, p, w

def get_ins03():
    c = [[24.093807423366908, 10.080319875023227, 14.757515400912471], [31.387241971699503, 24.9536182984079, 33.952172488974334], [19.666121176479262, 26.83268837911988, 31.711207017364384], [7.145287262426656, 35.42400842216008, 33.297025600992775], [27.51406164738628, 0.8082255952576203, 1.1328285810103296], [25.151593799406086, 30.643011357545014, 21.879218683570716], [27.5757029981703, 16.383290788743317, 34.96347832105082], [27.31337848166735, 9.542267263294073, 23.108067202122225], [4.085806898360547, 21.748735632161623, 24.89122829590135], [11.639631318742953, 34.178846468071455, 30.684307277766], [25.542324221676207, 3.0432788902623513, 7.099180282862631], [21.82047883283926, 6.340122572335661, 19.81045762912704]]
    p = [39, 41, 61, 40, 1, 8, 66, 50, 86, 78, 52, 42, 16, 34, 16, 11, 11, 63, 19, 21, 22, 39, 97, 73, 66, 27, 8, 46, 68, 73, 35, 21, 93, 32, 42, 41]
    w = [[1.1588713077300405, 12.766160858550712, 17.19154125974146], [7.676404401796011, 18.14863085866444, 2.2812831836264236], [0.8060501493286143, 9.525513313623467, 4.661088067546315], [6.576069009669048, 19.454775827713643, 3.9855691226902445], [4.955543606456385, 2.1388992876360646, 3.7512557816423775], [0.8671418558221111, 7.485903181624782, 12.938014538107863], [12.115446921111271, 18.20331725468, 15.821109712399037], [0.9991168260611261, 9.824639296983598, 11.87234262744048], [8.482573151311822, 14.920263269781431, 18.30001934593459], [2.86028936859551, 11.574927460311933, 1.8298476943450792], [11.057557324899733, 3.2754991846835257, 18.995378000391668], [11.967277427867806, 13.23997272282788, 11.139693555136265], [0.05216853690544809, 6.454657836707717, 10.391241472951023], [15.482380580553839, 13.29641737539463, 15.243008688782817], [7.153375287020074, 3.409200888733117, 19.123028381255295], [18.381606929177458, 4.767962418519267, 18.292963213003176], [13.969640906598721, 14.467176915525847, 6.405899468866039], [16.139605289588303, 4.522739317440894, 9.5392576204862], [18.709045100568037, 12.968655547965774, 1.9962086749041652], [19.17294321491311, 17.058437248897974, 3.931504840338731], [11.680350065730075, 14.910589349259153, 3.194779121613105], [9.339761241995767, 10.981136616040237, 8.605961001406575], [17.442768766065633, 8.438556769597445, 4.036577311474769], [17.9667184174229, 9.94007598153025, 13.27962578127341], [4.822808267072145, 6.484314643131839, 6.7454394649355525], [14.363904204367618, 0.38070436555355025, 13.493236603193694], [16.24509948646059, 5.526426285216961, 17.307835322433178], [9.904148657844992, 10.469911595700411, 15.534761382973096], [12.225734138174067, 19.357809499441434, 14.825297699270738], [14.660383479133703, 13.895024542969377, 8.685302442033809], [6.263050362906992, 12.690718168339751, 6.789738795707416], [10.736124560807829, 9.331118974896839, 15.016705281518197], [3.8193975053987472, 3.3818428727372973, 12.426789865152365], [13.603707960101652, 17.924819531857988, 0.06871582604195181], [17.811066177801592, 9.94714737426161, 18.865686410985017], [4.242346105386616, 5.881351075050385, 18.82381709084965]]

    return c, p, w

def rho_tunning():

    rhos = np.array(range(25)) / 25

    c,p,w = get_ins01()

    solutions = []

    for rho in rhos:
        aco_mmkp = aco_mmkp_headless(p=p, c=c, w=w, n_ants=NUMBER_OF_ANTS, max_iter=N_ITERS, alpha=ALPHA, beta=BETA, rho=rho, kp_first=KP_FIRST)
        solutions.append(aco_mmkp.best_fit_profit)

    plt.plot(rhos, np.array(solutions))
    plt.show()

def beta_tunning():

    betas = 5 * np.array(range(25)) / 25

    c,p,w = get_ins01()

    solutions = []

    for beta in betas:
        aco_mmkp = aco_mmkp_headless(p=p, c=c, w=w, n_ants=NUMBER_OF_ANTS, max_iter=N_ITERS, alpha=ALPHA, beta=beta, rho=RHO, kp_first=KP_FIRST)
        solutions.append(aco_mmkp.best_fit_profit)

    plt.plot(betas, np.array(solutions))
    plt.show()

rho_tunning()